# DSL version, should appear in the main blueprint.yaml
# and may appear in other imports. In such case, the versions must match
tosca_definitions_version: cloudify_dsl_1_0

imports:
    # importing cloudify related types, plugins, workflow, etc...
    # to speed things up, it is possible downloading this file,
    # including it in the blueprint directory and importing it
    # instead.
    - http://www.getcloudify.org/spec/cloudify/3.2/types.yaml
    # relative import of plugin.yaml that resides in the blueprint directory
    - ../../../plugin.yaml

inputs:
   subscription_id:
    default: '3121df85-fac7-48ec-bd49-08c2570686d0'
    type: string

  username:
    default: 'api@louisdevandierefastconnect.onmicrosoft.com'
    type: string

  password:
    default: 'Azerty@01'
    type: string

  location:
    default: 'westeurope'
    type: string

  publisherName:
    default: 'Canonical'
    type: string

  offer:
    default: 'UbuntuServer'
    type: string

  sku:
    default: 12.04.5-LTS
    type: string

  version:
    default: 'latest'
    type: string

  flavor_id:
    default: 'Standard_A1'
    type: string

node_templates:
    agent_server:
        type: cloudify.azure.nodes.Instance
     properties:
        subscription_id: { get_input: subscription_id }
        username: { get_input: username }
        password: { get_input: password }
        location: { get_input: location }
        publisherName: { get_input: publisherName }
        offer: { get_input: offer }
        sku: { get_input: sku }
        version: { get_input: version }
        flavor_id: { get_input: flavor_id }

outputs:
    # example output the could be used to simplify assertions by test
    test_output:
        description: an output for the test
        value: { get_attribute: [test_node_template, value_of_some_property]}
